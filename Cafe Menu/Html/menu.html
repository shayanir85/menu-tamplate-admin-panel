<!DOCTYPE html>
<html lang="fa" dir="rtl">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>فروشگاه آنلاین کافه | سفارش اینترنتی</title>

        <!-- فونت وزیرمتن -->
        <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/dist/font-face.css" rel="stylesheet"
            type="text/css" />

        <!-- تیلویند CSS -->
        <script src="https://cdn.tailwindcss.com"></script>

        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        colors: {
                            coffee: {
                                100: '#F5F5DC', // کرم روشن
                                200: '#E8E0D5',
                                600: '#8D6E63', // قهوه‌ای ملایم
                                800: '#4E342E', // قهوه‌ای تیره
                                900: '#3E2723', // قهوه‌ای سوخته
                            },
                            action: {
                                DEFAULT: '#D84315', // نارنجی آجری برای دکمه‌ها
                                hover: '#BF360C'
                            }
                        },
                        fontFamily: {
                            sans: ['Vazirmatn', 'sans-serif'],
                        }
                    }
                }
            }
        </script>

        <style>
            /* استایل اختصاصی برای اسکرول‌بار زیبا */

            ::-webkit-scrollbar {
                width: 8px;
            }

            ::-webkit-scrollbar-track {
                background: #f1f1f1;
            }

            ::-webkit-scrollbar-thumb {
                background: #D7CCC8;
                border-radius: 4px;
            }

            ::-webkit-scrollbar-thumb:hover {
                background: #A1887F;
            }
        </style>
    </head>

    <body class="bg-gray-50 text-gray-800 font-sans">

        <!-- ================= HEADER (فروشگاهی) ================= -->
        <header class="bg-white shadow-sm sticky top-0 z-30">
            <div class="container mx-auto px-4 py-3 flex items-center justify-between gap-4">

                <!-- Logo -->
                <div class="flex items-center gap-2 min-w-max">
                    <div class="w-10 h-10 bg-coffee-900 rounded-lg flex items-center justify-center text-white text-xl">
                        ☕</div>
                    <span class="font-bold text-xl text-coffee-900 hidden md:block">کافه استور</span>
                </div>

                <!-- Search Bar -->
                <div class="flex-1 max-w-2xl relative">
                    <input type="text" placeholder="جستجو در بین قهوه‌ها، کیک‌ها..."
                        class="w-full bg-gray-100 border-none rounded-xl px-4 py-3 pr-10 focus:ring-2 focus:ring-coffee-600 focus:bg-white transition outline-none">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 absolute top-3.5 right-3"
                        fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>

                <!-- User Actions -->
                <div class="flex items-center gap-3">
                    <button
                        class="hidden md:flex items-center gap-2 text-coffee-800 hover:bg-gray-100 px-3 py-2 rounded-lg transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        <span class="text-sm font-medium">ورود</span>
                    </button>

                    <button onclick="toggleCart()"
                        class="relative bg-coffee-900 text-white p-3 rounded-xl hover:bg-coffee-800 transition shadow-lg shadow-coffee-200">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                        <!-- Badge Count -->
                        <span id="cart-count"
                            class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center border-2 border-white">0</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- ================= MAIN LAYOUT ================= -->
        <main class="container mx-auto px-4 py-8 flex flex-col lg:flex-row gap-8">

            <!-- SIDEBAR FILTERS (ستون سمت راست) -->
            <aside class="w-full lg:w-1/4 space-y-6">
                <!-- Categories -->
                <div class="bg-white p-5 rounded-2xl shadow-sm border border-gray-100">
                    <h3 class="font-bold text-coffee-900 mb-4 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h7" />
                        </svg> دسته‌بندی‌ها
                    </h3>
                    <ul class="space-y-3 text-sm text-gray-600">
                        <li class="flex items-center justify-between cursor-pointer hover:text-action transition">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" checked class="rounded text-coffee-600 focus:ring-coffee-600">
                                همه محصولات
                            </label>
                            <span class="text-xs bg-gray-100 px-2 py-0.5 rounded-full">42</span>
                        </li>
                        <li class="flex items-center justify-between cursor-pointer hover:text-action transition">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" class="rounded text-coffee-600 focus:ring-coffee-600">
                                قهوه گرم
                            </label>
                        </li>
                        <li class="flex items-center justify-between cursor-pointer hover:text-action transition">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" class="rounded text-coffee-600 focus:ring-coffee-600">
                                نوشیدنی سرد
                            </label>
                        </li>
                        <li class="flex items-center justify-between cursor-pointer hover:text-action transition">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" class="rounded text-coffee-600 focus:ring-coffee-600">
                                کیک و دسر
                            </label>
                        </li>
                        <li class="flex items-center justify-between cursor-pointer hover:text-action transition">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="checkbox" class="rounded text-coffee-600 focus:ring-coffee-600">
                                دانه قهوه (بسته‌ای)
                            </label>
                        </li>
                    </ul>
                </div>

                <!-- Banner Small -->
                <div class="hidden lg:block relative rounded-2xl overflow-hidden shadow-md group">
                    <img src="https://images.unsplash.com/photo-1514432324607-a09d9b4aefdd?auto=format&fit=crop&w=400&q=80"
                        class="w-full h-64 object-cover group-hover:scale-105 transition duration-500">
                    <div class="absolute inset-0 bg-black/40 flex flex-col justify-end p-4">
                        <span class="text-white text-sm">پیشنهاد ویژه</span>
                        <h4 class="text-white font-bold text-xl">قهوه تازه کلمبیا</h4>
                    </div>
                </div>
            </aside>

            <!-- PRODUCT GRID (ستون سمت چپ - محصولات) -->
            <div class="w-full lg:w-3/4">

                <!-- Toolbar (مرتب سازی) -->
                <div
                    class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 mb-6 flex flex-col sm:flex-row justify-between items-center gap-4">
                    <div class="flex items-center gap-2 text-sm text-gray-500">
                        <span class="font-bold text-gray-800">مرتب‌سازی:</span>
                        <button class="text-coffee-900 font-bold">پرفروش‌ترین</button>
                        <span class="text-gray-300">|</span>
                        <button class="hover:text-coffee-600">ارزان‌ترین</button>
                        <span class="text-gray-300">|</span>
                        <button class="hover:text-coffee-600">گران‌ترین</button>
                    </div>
                    <span class="text-xs text-gray-400">نمایش 8 محصول</span>
                </div>

                <!-- Grid Container -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
                    id="products-container">
                    <!-- محصولات با جاوااسکریپت پر می‌شوند اما برای نمایش اولیه چند نمونه استاتیک می‌گذارم -->

                    <!-- محصول 1 -->
                    <div
                        class="bg-white rounded-2xl p-3 border border-gray-100 shadow-sm hover:shadow-xl transition group flex flex-col">
                        <div class="relative bg-gray-100 rounded-xl overflow-hidden h-48 mb-3">
                            <img src="https://images.unsplash.com/photo-1461023058943-716d1629796e?auto=format&fit=crop&w=400&q=80"
                                class="w-full h-full object-cover group-hover:scale-110 transition duration-700">
                            <span
                                class="absolute top-2 right-2 bg-green-500 text-white text-[10px] font-bold px-2 py-1 rounded-full">جدید</span>
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-gray-800 mb-1">آیس کارامل ماکیاتو</h3>
                            <div class="flex text-yellow-400 text-xs mb-2">★★★★☆</div>
                            <p class="text-xs text-gray-500 line-clamp-2 mb-3">شیر سرد، سیروپ وانیل، اسپرسو و سس کارامل.
                            </p>
                        </div>
                        <div class="mt-auto">
                            <div class="flex items-center gap-2 mb-3">
                                <span class="text-lg font-bold text-coffee-900">۷۵,۰۰۰</span>
                                <span class="text-xs text-gray-500">تومان</span>
                            </div>
                            <button
                                onclick="addToCart(4, 'آیس کارامل ماکیاتو', 75000, 'https://images.unsplash.com/photo-1461023058943-716d1629796e?auto=format&fit=crop&w=400&q=80')"
                                class="w-full bg-white border border-coffee-200 text-coffee-900 font-bold py-2.5 rounded-xl hover:bg-action hover:border-action hover:text-white transition flex items-center justify-center gap-2">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                    stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                                </svg>
                                افزودن
                            </button>
                        </div>
                    </div>

                </div>

                <!-- Pagination -->
                <div class="mt-12 flex justify-center gap-2">
                    <button
                        class="w-10 h-10 rounded-lg bg-coffee-900 text-white flex items-center justify-center">1</button>
                    <button
                        class="w-10 h-10 rounded-lg bg-white border hover:bg-gray-100 flex items-center justify-center">2</button>
                    <button
                        class="w-10 h-10 rounded-lg bg-white border hover:bg-gray-100 flex items-center justify-center">3</button>
                    <span class="flex items-end px-2 text-gray-400">...</span>
                    <button
                        class="w-10 h-10 rounded-lg bg-white border hover:bg-gray-100 flex items-center justify-center">></button>
                </div>
            </div>
        </main>

        <!-- ================= CART SIDEBAR (عملکرد واقعی) ================= -->
        <div id="cart-overlay" onclick="toggleCart()"
            class="fixed inset-0 bg-black/60 z-40 hidden transition-opacity backdrop-blur-sm"></div>

        <aside id="cart-sidebar"
            class="fixed top-0 bottom-0 left-0 w-full sm:w-96 bg-white shadow-2xl z-50 transform -translate-x-full transition-transform duration-300 flex flex-col">

            <!-- Cart Header -->
            <div class="p-5 border-b bg-coffee-50 flex justify-between items-center">
                <div>
                    <h3 class="font-bold text-lg text-coffee-900">سبد خرید</h3>
                    <span class="text-xs text-gray-500" id="cart-header-count">0 کالا</span>
                </div>
                <button onclick="toggleCart()"
                    class="bg-white p-2 rounded-full hover:bg-red-50 text-gray-500 hover:text-red-500 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Cart Items Container -->
            <div id="cart-items" class="flex-1 overflow-y-auto p-4 space-y-4">
                <!-- آیتم‌ها اینجا با جاوااسکریپت اضافه میشن -->
                <div class="text-center text-gray-400 mt-10">
                    <p>سبد خرید شما خالی است</p>
                </div>
            </div>

            <!-- Cart Footer -->
            <div class="p-5 border-t bg-white shadow-[0_-5px_15px_rgba(0,0,0,0.05)]">
                <div class="flex justify-between mb-2 text-sm text-gray-500">
                    <span>تخفیف:</span>
                    <span class="text-red-500">0 تومان</span>
                </div>
                <div class="flex justify-between mb-4 text-xl font-bold text-coffee-900">
                    <span>قابل پرداخت:</span>
                    <span id="cart-total">0 تومان</span>
                </div>
                <button
                    class="w-full bg-action hover:bg-action-hover text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-orange-200 transition transform active:scale-95">
                    تکمیل سفارش
                </button>
            </div>
        </aside>

        <!-- ================= JAVASCRIPT ================= -->
        <script src="../node_modules/axios/dist/axios.js"></script>
        <script>
            // نمونه دیتای محصولات (در عمل باید از سرور بیاد)
            axios.get('http://127.0.0.1:8000/api/products')
                .then(response => {
                    console.log(response.data);
                })
                .catch(error => {
                    console.error('خطا در دریافت محصولات:', error);
                });
        </script>
        <script>
            let cart = [];
            // باز و بسته کردن سایدبار
            function toggleCart() {
                const sidebar = document.getElementById('cart-sidebar');
                const overlay = document.getElementById('cart-overlay');

                overlay.classList.toggle('hidden');

                if (sidebar.classList.contains('-translate-x-full')) {
                    sidebar.classList.remove('-translate-x-full');
                    sidebar.classList.add('translate-x-0');
                } else {
                    sidebar.classList.remove('translate-x-0');
                    sidebar.classList.add('-translate-x-full');
                }
            }

            // تابع افزودن به سبد
            function addToCart(id, name, price, image) {
                // چک کن ببین محصول قبلا تو سبد هست؟
                const existingItem = cart.find(item => item.id === id);

                if (existingItem) {
                    existingItem.qty++;
                } else {
                    cart.push({
                        id,
                        name,
                        price,
                        image,
                        qty: 1
                    });
                }

                updateCartUI();

                // باز کردن خودکار سبد خرید برای تجربه کاربری بهتر (اختیاری)
                const sidebar = document.getElementById('cart-sidebar');
                if (sidebar.classList.contains('-translate-x-full')) {
                    toggleCart();
                }
            }

            // حذف یا کم کردن محصول
            function removeFromCart(id) {
                const index = cart.findIndex(item => item.id === id);
                if (index !== -1) {
                    if (cart[index].qty > 1) {
                        cart[index].qty--;
                    } else {
                        cart.splice(index, 1);
                    }
                    updateCartUI();
                }
            }

            // افزودن تعداد در داخل سبد
            function addQty(id) {
                const item = cart.find(i => i.id === id);
                if (item) {
                    item.qty++;
                    updateCartUI();
                }
            }

            // به‌روزرسانی ظاهر سبد خرید
            function updateCartUI() {
                const cartContainer = document.getElementById('cart-items');
                const totalEl = document.getElementById('cart-total');
                const countBadge = document.getElementById('cart-count');
                const headerCount = document.getElementById('cart-header-count');

                // 1. آپدیت بج روی هدر
                const totalQty = cart.reduce((acc, item) => acc + item.qty, 0);
                countBadge.innerText = totalQty;
                countBadge.classList.toggle('hidden', totalQty === 0);
                headerCount.innerText = totalQty + ' کالا';

                // 2. ساخت مجدد لیست آیتم‌ها
                cartContainer.innerHTML = '';

                if (cart.length === 0) {
                    cartContainer.innerHTML = `
                    <div class="flex flex-col items-center justify-center h-full text-gray-400 opacity-60">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" /></svg>
                        <p>سبد شما خالی است</p>
                    </div>`;
                } else {
                    cart.forEach(item => {
                        const itemTotal = item.price * item.qty;
                        cartContainer.innerHTML += `
                        <div class="flex gap-3 bg-white border border-gray-100 p-2 rounded-xl">
                            <img src="${item.image}" class="w-20 h-20 rounded-lg object-cover bg-gray-100">
                            <div class="flex-1 flex flex-col justify-between">
                                <h4 class="text-sm font-bold text-coffee-900 line-clamp-1">${item.name}</h4>
                                <div class="flex justify-between items-end">
                                    <span class="text-action text-sm font-bold">${itemTotal.toLocaleString()} ت</span>
                                    
                                    <div class="flex items-center gap-3 bg-gray-50 rounded-lg px-2 py-1 border border-gray-200">
                                        <button onclick="addQty(${item.id})" class="text-green-600 font-bold">+</button>
                                        <span class="text-sm font-medium w-4 text-center">${item.qty}</span>
                                        <button onclick="removeFromCart(${item.id})" class="text-red-500 font-bold">-</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    });
                }

                // 3. محاسبه جمع کل
                const totalPrice = cart.reduce((acc, item) => acc + (item.price * item.qty), 0);
                totalEl.innerText = totalPrice.toLocaleString() + ' تومان';
            }
        </script>
    </body>

</html>